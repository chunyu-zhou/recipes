<!DOCTYPE HTML>

<html>
<head>
<meta charset="utf-8">
<title>message board</title>
</head>

<body>


<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/json2/20160511/json2.min.js"></script>
<script type="text/javascript">

    function getFormData($form){
        const unindexed_array = $form.serializeArray();
        const indexed_array = {};

        $.map(unindexed_array, function(n, i){
            indexed_array[n['name']] = n['value'];
        });

        return indexed_array;
    }

    function myPost() {
        const frm = $(document.myForm);
        const dat = JSON.stringify(getFormData(frm));

        const xhr = new XMLHttpRequest();
        xhr.open("POST", "/message");
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.send(dat);

    }
</script>

<!--<form action="/message" method="post" id="form1">-->
<form onsubmit="return myPost();" method="post" name="myForm">
    <p>title: <input type="text" name="title" /></p>
    <p>body:  <input type="text" name="body" /></p>
    <input type="submit" value="Submit" />
</form>


</body>

</html>
